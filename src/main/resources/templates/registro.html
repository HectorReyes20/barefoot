<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="~{fragments :: head('Registro - Barefoot')}"></th:block>
    <link rel="stylesheet" th:href="@{/css/autenticacion.css}">
</head>
<body>

<nav th:replace="~{fragments :: navbar}"></nav>

<div class="auth-wrapper">
    <div class="auth-card">

        <div class="auth-banner">
            <div class="auth-banner-content">
                <h2 class="font-serif mb-3">Únete al movimiento</h2>
                <p class="opacity-75">Crea tu cuenta y empieza a diseñar calzado único, saludable y hecho a tu medida.</p>
            </div>
        </div>

        <div class="auth-form-container">
            <div class="auth-header mb-4">
                <h2 class="auth-title font-serif">Crear Cuenta</h2>
                <p class="text-muted small">Completa tus datos para comenzar</p>
            </div>

            <div th:if="${error}" class="alert alert-danger py-2 small rounded-2 mb-4 text-center border-0 bg-danger bg-opacity-10 text-danger fw-bold" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i> <span th:text="${error}">Error</span>
            </div>

            <form th:action="@{/registro}" method="post" th:object="${usuario}">
                <div class="row g-3">
                    <div class="col-6 form-group mb-0">
                        <label class="form-label">Nombre</label>
                        <input type="text" class="form-control" th:field="*{nombre}" placeholder="Juan" required>
                    </div>
                    <div class="col-6 form-group mb-0">
                        <label class="form-label">Apellido</label>
                        <input type="text" class="form-control" th:field="*{apellido}" placeholder="Pérez" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label class="form-label">Correo Electrónico</label>
                    <input type="email" class="form-control" th:field="*{email}" placeholder="tu@email.com" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Teléfono</label>
                    <input type="tel" class="form-control" th:field="*{telefono}" placeholder="+51 999 999 999">
                </div>

                <div class="form-group">
                    <label class="form-label">Contraseña</label>
                    <input type="password" class="form-control" id="password" th:field="*{password}" placeholder="Mínimo 6 caracteres" required>
                    <div class="mt-1">
                        <small class="text-muted" style="font-size: 0.75rem;">Seguridad: </small>
                        <small id="password-strength" class="fw-bold" style="font-size: 0.75rem;">...</small>
                    </div>
                </div>

                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="terms" required>
                    <label class="form-check-label small text-muted" for="terms">
                        Acepto los <a href="#" class="text-decoration-none text-primary fw-bold">Términos y Condiciones</a>
                    </label>
                </div>

                <input type="hidden" name="redirect" th:if="${param.redirect}" th:value="${param.redirect}">

                <button type="submit" class="btn-auth">
                    Registrarse
                </button>
            </form>

            <div class="text-center mt-4">
                <p class="small text-muted mb-0">
                    ¿Ya eres miembro?
                    <a th:href="@{/login}" class="auth-link ms-1">Inicia sesión aquí</a>
                </p>
            </div>
        </div>
    </div>
</div>

<footer th:replace="~{fragments :: footer}"></footer>
<div th:replace="~{fragments :: scripts}"></div>

<script>
    const passInput = document.getElementById('password');
    const strengthText = document.getElementById('password-strength');

    if(passInput){
        passInput.addEventListener('input', function() {
            const val = this.value;
            if(val.length === 0) { strengthText.textContent = "..."; strengthText.className = ""; }
            else if(val.length < 6) { strengthText.textContent = "Débil"; strengthText.className = "text-danger fw-bold"; }
            else { strengthText.textContent = "Buena"; strengthText.className = "text-success fw-bold"; }
        });
    }
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mis Pedidos - Barefoot Store</title>
    <th:block th:insert="~{fragments :: head('Mis Pedidos - Barefoot Store')}"></th:block>
</head>
<body>

<nav th:replace="~{fragments :: navbar}"></nav>

<div class="container my-5">
    <h1 style="color: var(--color-primary); margin-bottom: 30px;">
        <i class="fas fa-history me-2"></i> Mis Pedidos
    </h1>

    <div th:if="${#lists.isEmpty(pedidos)}" class="alert alert-info text-center" role="alert">
        <i class="fas fa-inbox me-2"></i> No tienes pedidos aún
        <a th:href="@{/productos}" class="ms-3">Ver Catálogo</a>
    </div>

    <div th:if="${!#lists.isEmpty(pedidos)}" style="overflow-x: auto;">
        <table class="table table-striped table-hover align-middle">
            <thead style="background-color: var(--color-primary); color: white;">
            <tr>
                <th>Número</th>
                <th>Fecha</th>
                <th>Estado</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="pedido : ${pedidos}">
                <td><strong th:text="${pedido.numeroPedido}"></strong></td>

                <td th:text="${#temporals.format(pedido.fechaPedido, 'dd/MM/yyyy HH:mm')}"></td>

                <td>
                        <span th:class="'badge bg-' + ${pedido.estado.colorBadge}"
                              th:text="${pedido.estado.nombre}">
                        </span>
                </td>

                <td>S/ <span th:text="${#numbers.formatDecimal(pedido.total, 1, 'COMMA', 2, 'POINT')}"></span></td>

                <td>
                    <a th:href="@{/mis-pedidos/{id}(id=${pedido.id})}" class="btn btn-sm btn-primary">
                        <i class="fas fa-eye me-1"></i> Ver
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <a th:href="@{/productos}" class="btn btn-outline-primary">
            <i class="fas fa-arrow-left me-2"></i> Volver al Catálogo
        </a>
    </div>
</div>

<footer th:replace="~{fragments :: footer}"></footer>
<div th:replace="~{fragments :: scripts}"></div>

</body>
</html>
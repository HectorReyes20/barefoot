<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="~{fragments :: head('Mis Pedidos - Barefoot Store')}"></th:block>
    <link rel="stylesheet" th:href="@{/css/usuario.css}">
</head>
<body>

<nav th:replace="~{fragments :: navbar}"></nav>

<div style="height: 100px;"></div>
<div class="container mb-5" style="min-height: 60vh;">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="font-serif fw-bold text-primary-dark m-0">Historial de Pedidos</h2>
        <a th:href="@{/perfil}" class="btn btn-outline-secondary btn-sm">Volver al Perfil</a>
    </div>

    <div th:if="${#lists.isEmpty(pedidos)}" class="text-center py-5 border rounded bg-white">
        <i class="fas fa-box-open fa-3x text-muted mb-3 opacity-50"></i>
        <h4 class="font-serif">No tienes pedidos aún</h4>
        <a th:href="@{/productos}" class="btn btn-primary mt-3">Ir a la tienda</a>
    </div>

    <div th:if="${!#lists.isEmpty(pedidos)}" class="card-elegant">
        <div class="table-responsive">
            <table class="table table-elegant align-middle">
                <thead>
                <tr>
                    <th>Pedido</th>
                    <th>Fecha</th>
                    <th>Estado</th>
                    <th>Total</th>
                    <th>Acción</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="pedido : ${pedidos}">
                    <td>
                        <strong th:text="${pedido.numeroPedido}">PED-001</strong>
                    </td>
                    <td th:text="${#temporals.format(pedido.fechaPedido, 'dd/MM/yyyy')}">01/01/2025</td>
                    <td>
                        <span th:class="'badge-status badge-' + ${pedido.estado}"
                              th:text="${pedido.estado.nombre}">Pendiente</span>
                    </td>
                    <td class="fw-bold text-dark">
                        S/ <span th:text="${#numbers.formatDecimal(pedido.total, 1, 'COMMA', 2, 'POINT')}">0.00</span>
                    </td>
                    <td>
                        <a th:href="@{/mis-pedidos/{id}(id=${pedido.id})}" class="btn btn-sm btn-outline-dark">
                            Ver Detalles
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<footer th:replace="~{fragments :: footer}"></footer>
<div th:replace="~{fragments :: scripts}"></div>
</body>
</html>